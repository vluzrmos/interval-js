<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Math Interval JS</title>

    <script src="src/interval.min.js"></script>
    
    <style>
        .success {
            background-color: green;
        }
        .error {
            background-color: red;
        }
    </style>
    
    <!-- Helpers -->
    <script>
        /**
         * Write on document replacing braces on str with props on obj.
         * @param  {String} str
         * @param  {Object} object
         * @return {undefined}
         */
        function write(str, object){
            str = replaceProps(str, object);

            document.write(str);
        }

        /**
         * Replace braces on str with props on obj.
         * @param  {String} str
         * @param  {Object} obj
         * @return {String}
         */
        function replaceProps(str, obj)
        {
            for(var prop in obj)
            {
                str = str.replace(new RegExp("\{\s*"+prop+"\s*\}", "ig"), obj[prop]);
            }

            return str;
        }



        if (!Date.now) {
            /**
             * Returns the actual timestamp in milliseconds.
             * @return {Integer}
             */
            Date.now = function () { return new Date().getTime(); }
        }
    </script>

    <!-- Usage with some timing test -->
    <script>
        var specs = [
            { interval: '[1,2]',        test: 1, expect: true  },
            { interval: '[2,3]',        test: 2, expect: true  },
            { interval: '[2,3]',        test: 3, expect: true  },
            { interval: '[-Inf,Inf]',   test: 1, expect: true  },
            { interval: ')1,4(',        test: 2, expect: true  },
            { interval: '{1, 2, 3, 4}', test: 3, expect: true  },
            { interval: '[2,3]',        test: 1, expect: false },
            { interval: '[2,3]',        test: 4, expect: false },
            { interval: ')1,4(',        test: 1, expect: false },
            { interval: ')1,4(',        test: 4, expect: false },
            { interval: '{1, 2, 3, 4}', test: 5, expect: false },
            { interval: '{1, 2, 3, 4}', test: 5, expect: false },
            { interval: '{1, 1, 3, 4}', test: 5, expect: false },
            { interval: '{1, 2, 3, 4}', test: 5, expect: false }
        ];

        var timing = 0;

        for (var i in specs) {
            var start = Date.now();

            var result = Interval.test(specs[i].test, specs[i].interval);

            var end  = Date.now();

            // Time wasted.
            timing += (end-start);

            var color = (result==specs[i].expect ? "success" : "error");

            write(
                'Asserting if the <b>{test}</b> is in the interval <b>{interval}</b>.<br/>',
                specs[i]
            );

            write(
                'Expecting: <b>{expect}</b>.<br/>',
                specs[i]
            );

            write(
                '<span class=\'{color}\'>Result: <b>{result}</b>.</span>',
                {color:color, result:result}
            );

            write('<br/> <br/>', undefined);
        }

        //In my tests it was always between 0 and 2 ms.
        document.write("Total Time: "+timing+" ms.");
    </script>
</head>
<body>
    
</body>
</html>
